# SPDX-FileCopyrightText: Copyright (c) 2016-2025 Objectionary.com
# SPDX-License-Identifier: MIT

+tests

# Win32 API tests
# Test that GetCurrentProcessId returns a positive integer
[] > get-current-process-id-positive
  gt. > @
    QQ.sys.win32
      "GetCurrentProcessId"
      *
    0

# Test that GetSystemTime returns a non-empty string
[] > get-system-time-returns-string
  gt. > @
    QQ.sys.win32
      "GetSystemTime"
      *
    ""

# Test that GetEnvironmentVariable returns non-empty for PATH
[] > environment-variable-has-value
  gt. > @
    QQ.sys.win32
      "GetEnvironmentVariable"
      * "PATH"
    ""

# Test that inet_addr correctly converts IP address
[] > inet-addr-converts-ip
  gt. > @
    QQ.sys.win32
      "inet_addr"
      * "192.168.1.1"
    0

# Test that WriteFile returns success (not false)
[] > write-file-succeeds
  eq. > @
    QQ.sys.win32
      "WriteFile"
      * "/tmp/win32-test-output.txt" "test data"
    true

# DEBUG: This test should always fail to check if win32-test.eo is executed
[] > debug-this-should-fail
  FALSE > @
