Testing pack: embedded-object
EO source:
# This is the default 64+ symbols comment in front of named abstract object.
[x] > foo
  $ > this
  # This is the default 64+ symbols comment in front of named abstract object.
  [] > xyz
    # This is the default 64+ symbols comment in front of named abstract object.
    [] > bar
      this.x > @

XSL transformations: [ 'objects', 'package', 'attrs', 'data', 'to-js' ]

Tests: [
  {
    "args": [
      [
        "  obj.attrs['this'] = attr.once(",
        "    attr.lambda(",
        "      obj, function(rho) {",
        "        let ret = rho",
        "        return ret",
        "      }",
        "    )",
        "  )"
      ],
      [
        "  obj.attrs['xyz'] = attr.once(",
        "    attr.lambda(",
        "      obj, function(rho) {",
        "        let ret = foo$xyz(rho)",
        "        return ret",
        "      }",
        "    )",
        "  )"
      ]
    ],
    "method": "includes",
    "node": ".program.objects.object{.\"@_name\" == 'foo'}.javascript"
  },
  {
    "args": [
      [
        "  obj.attrs['bar'] = attr.once(",
        "    attr.lambda(",
        "      obj, function(rho) {",
        "        let ret = foo$xyz$bar(rho)",
        "        return ret",
        "      }",
        "    )",
        "  )"
      ]
    ],
    "method": "includes",
    "node": ".program.objects.object{.\"@_name\" == 'foo$xyz'}.javascript"
  },
  {
    "args": [
      [
        "  obj.attrs['œÜ'] = attr.once(",
        "    attr.lambda(",
        "      obj, function(rho) {",
        "        let ret_base = taken(taken(taken(rho, 'œÅ'), 'œÅ'), 'this')",
        "        let ret = taken(ret_base, 'x')",
        "        return ret",
        "      }",
        "    )",
        "  )"
      ]
    ],
    "method": "includes",
    "node": ".program.objects.object{.\"@_name\" == 'foo$xyz$bar'}.javascript"
  },
  {
    "args": [
      "module.exports = foo"
    ],
    "method": "includes",
    "node": ".program.objects.object[-1].javascript"
  }
]
Running: /tmp/gh-issue-solver-1766085739012/eo2js/test/mvnw/mvnw org.eolang:eo-maven-plugin:register org.eolang:eo-maven-plugin:parse org.eolang:eo-maven-plugin:lint -Deo.version=0.59.0 -Deo.tag=0.59.0 -Deo.sourcesDir=/tmp/gh-issue-solver-1766085739012/experiments/test-pack-run/embedded-object/src -Deo.targetDir=/tmp/gh-issue-solver-1766085739012/experiments/test-pack-run/embedded-object/target -Deo.failOnWarning=false --batch-mode --color=never --update-snapshots --fail-fast --strict-checksums
[33m 0ms; 0 files generated so far...[39m[0K[1GWarning: JAVA_HOME environment variable is not set.
[INFO] Scanning for projects...
[33m 2s; 0 files generated so far...[39m[0K[1G[INFO] 
[INFO] -----------------------< com.maxonfjvipon:eo2js >-----------------------
[INFO] Building eo2js 0.0.0
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- eo:0.59.0:register (default-cli) @ eo2js ---
[INFO] Registered 1 EO sources from /tmp/gh-issue-solver-1766085739012/experiments/test-pack-run/embedded-object/src to /tmp/gh-issue-solver-1766085739012/experiments/test-pack-run/embedded-object/target/eo-foreign.json, included [**.eo], excluded []
[INFO] 
[INFO] --- eo:0.59.0:parse (default-cli) @ eo2js ---
[33m 3s; 1 files generated so far...[39m[0K[1G[INFO] Parsed 1 new .eo sources out of 1 to XMIRs in 1s
[INFO] 
[INFO] --- eo:0.59.0:lint (default-cli) @ eo2js ---
[33m 4s; 2 files generated so far...[39m[0K[1G[33m 5s; 2 files generated so far...[39m[0K[1G[WARNING] foo:0 Tests not found for "foo" (unit-test-missing (Single))
[WARNING] foo:0 The +package meta is mandatory, but is absent (mandatory-package (Single))
[WARNING] foo:3 The object "this" is redundant and may be inlined (redundant-object (Single))
[WARNING] foo:2 The void attribute "x" is not used in the object "foo" (unused-void-attr (Single))
[WARNING] foo:7 Sparse decoration is prohibited (sparse-decoration (Single))
[WARNING] foo:0 The +home meta is mandatory, but is absent (must contain URL of repository where object sources may be found) (mandatory-home (Single))
[WARNING] foo:0 The +spdx meta is mandatory, but is absent (mandatory-spdx (Single))
[WARNING] foo:0 The +version meta is mandatory, but is absent (mandatory-version (Single))
[33m 6s; 3 files generated so far...[39m[0K[1G[INFO] XMIR programs linted as a package: 1
[INFO] Linted 1 out of 1 XMIR program(s) that needed this (out of 1 total programs) in 2s: 8 warnings
[INFO] Read more about lints: https://www.objectionary.com/lints/0.0.60
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  4.308 s
[INFO] Finished at: 2025-12-18T20:28:35+01:00
[INFO] ------------------------------------------------------------------------
[2K
=== RESULT ===
FAILURES:
  1. NODE: .program.objects.object{."@_name" == 'foo'}.javascript, METHOD: includes, ARG:   obj.attrs['xyz'] = attr.once(
    attr.lambda(
      obj, function(rho) {
        let ret = foo$xyz(rho)
        return ret
      }
    )
  )
  2. .program.objects.object{."@_name" == 'foo$xyz'}.javascript
  3. .program.objects.object{."@_name" == 'foo$xyz$bar'}.javascript

XMIR saved to: /tmp/gh-issue-solver-1766085739012/experiments/test-pack-run/embedded-object/result.xmir
